{
  "meta": {
    "project": "InvoiceFlow",
    "date": "2025-09-04",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "InvoiceFlow is a cross-platform Flutter application that offers a comprehensive invoice management solution designed for small to medium businesses and freelancers. It integrates real-time invoice lifecycle management, inventory tracking, customer relationship management, and advanced analytics through a cloud-synced Firebase backend, delivering a unified business management platform with multi-device support.",
  "core_goals": [
    "Provide end-to-end invoice lifecycle management with sales and purchase invoices, draft handling, payment tracking, and audit trails.",
    "Enable real-time inventory management with automatic stock updates, detailed stock movement audit, and low stock alerts.",
    "Offer customer management capabilities including contact profiles, purchase history, payment tracking, and analytics.",
    "Deliver advanced financial and business analytics with real-time KPIs, interactive charts, and customizable date ranges.",
    "Ensure secure multi-tenant data isolation and robust authentication using Firebase Authentication with support for email/password and Google Sign-In.",
    "Support seamless cross-platform operation on Android, iOS, and web using a single Flutter codebase.",
    "Maintain high performance with fast app launch, authentication, and data loading times, ensuring responsive user experience."
  ],
  "key_features": [
    "Authentication with email/password and Google Sign-In, password recovery, and automatic user session management.",
    "Comprehensive invoice management including creation, status workflow management (Draft, Posted, Paid, Cancelled), bulk operations, and PDF export.",
    "Customer management with real-time Firestore-backed profiles, phone-based lookup, and spending behavior analytics.",
    "Inventory system supporting real-time stock tracking, barcode scanning, reorder point alerts, and movement audit trail.",
    "Advanced analytics dashboard showing revenue, payment collection efficiency, profit analysis, and inventory health with interactive charts.",
    "Sophisticated Material 3 design system with navy and sage palette, responsive layouts, and accessibility considerations.",
    "Local notifications with inventory alerts and scheduled reminders through Firebase Cloud Messaging and local notification services.",
    "Cross-platform routing and seamless navigation architecture with bottom navigation bar and modal/detail screens.",
    "CSV data migration utilities and WhatsApp integration for payment reminders.",
    "Strict data security and privacy compliance, including Firestore security rules, GDPR adherence, and comprehensive error handling."
  ],
  "user_flow_summary": [
    "User opens the app and is routed through the AuthWrapper to Login, Register, or into the main app based on authentication state.",
    "Authenticated users land on the Home Dashboard where KPIs and recent invoices are displayed with navigation to detailed areas.",
    "Users can create, view, edit, and manage invoices with lifecycle states, including draft saving, posting, and cancellation with stock validation.",
    "Inventory management allows users to view stock levels, receive low stock alerts, and scan barcodes for fast item identification.",
    "Customer profiles are managed with real-time sync and powerful search by phone number, showing purchase history and outstanding balances.",
    "Users access the Analytics section featuring an interactive 7-card KPI dashboard with customizable date filters and insightful charts.",
    "Notifications prompt users on critical inventory statuses and invoice reminders, including WhatsApp payment reminders integration.",
    "Profile and settings screens allow users to manage account info and app configurations within a consistent Material 3 themed UI."
  ],
  "validation_criteria": [
    "Authentication flow must complete sign-in and sign-out operations in under 2 seconds with appropriate error messages on failures.",
    "Invoice lifecycle states must enforce business rules including stock validation on posting and cancellation with audit trails.",
    "Inventory stock updates must reflect instantly after invoice posting and trigger notifications when stock reaches reorder points.",
    "Customer data must be isolated per user with Firestore security rules preventing cross-user data access.",
    "Analytics dashboards must load KPIs and charts within 3 seconds and reflect real-time data updates accurately.",
    "App UI must maintain responsiveness across Android, iOS, and Web with proper layout adaptation and minimum touch target sizing.",
    "All data operations must be atomic and handle errors gracefully without exposing sensitive information.",
    "Local notifications and scheduled reminders must function reliably, triggering at the correct times based on real-time data.",
    "CSV import utilities must correctly migrate legacy invoice data without loss, preserving auditability and data integrity.",
    "Security and privacy standards including GDPR compliance, data encryption, and session management must be fully implemented and verified."
  ],
  "code_summary": {
    "tech_stack": [
      "Dart",
      "Flutter",
      "Firebase (Auth, Firestore, Storage, Messaging, Analytics)",
      "Provider (state management)",
      "Flutter Web",
      "SharedPreferences",
      "Dio",
      "Flutter Local Notifications",
      "CSV assets",
      "Path Provider"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "Handles user auth state, login, registration, and auth routing.",
        "files": [
          "lib/presentation/auth/auth_wrapper.dart",
          "lib/presentation/auth/login_screen.dart",
          "lib/presentation/auth/register_screen.dart",
          "lib/providers/auth_provider.dart",
          "lib/services/auth_service.dart",
          "lib/main.dart"
        ]
      },
      {
        "name": "Home Dashboard",
        "description": "Displays KPIs, recent invoices, and navigation to key areas.",
        "files": [
          "lib/presentation/home_dashboard/home_dashboard.dart",
          "lib/presentation/home_dashboard/widgets/metric_card_widget.dart",
          "lib/presentation/home_dashboard/widgets/recent_invoice_item_widget.dart",
          "lib/services/invoice_service.dart",
          "lib/services/inventory_service.dart",
          "lib/services/event_service.dart"
        ]
      },
      {
        "name": "Analytics (Legacy)",
        "description": "Analytics dashboards including charts and tables.",
        "files": [
          "lib/presentation/analytics/analytics_page.dart",
          "lib/presentation/analytics/widgets/analytics_card.dart",
          "lib/presentation/analytics/widgets/analytics_card_grid.dart",
          "lib/presentation/analytics/widgets/date_range_selector.dart",
          "lib/presentation/analytics/modals/*"
        ]
      },
      {
        "name": "Analytics (Redesign)",
        "description": "New analytics experience, KPIs and insights.",
        "files": [
          "lib/presentation/analytics_redesign/analytics_main_screen.dart",
          "lib/presentation/analytics_redesign/analytics_redesign_scaffold.dart",
          "lib/presentation/analytics_redesign/analytics_redesign_screen.dart",
          "lib/presentation/analytics_redesign/overview_kpis_screen.dart",
          "lib/presentation/analytics_redesign/widgets/*"
        ]
      },
      {
        "name": "Invoices",
        "description": "Invoice list, details, creation utilities, and CSV-backed data.",
        "files": [
          "lib/presentation/invoices_list_screen/invoices_list_screen.dart",
          "lib/presentation/invoices_list_screen/widgets/*",
          "lib/presentation/invoice_detail_screen/invoice_detail_screen.dart",
          "lib/presentation/invoice_detail_screen/widgets/*",
          "lib/presentation/invoice_type_selection_screen.dart",
          "lib/services/invoice_service.dart",
          "lib/services/csv_invoice_service.dart"
        ]
      },
      {
        "name": "Inventory",
        "description": "Inventory list and details. Firestore now primary source.",
        "files": [
          "lib/presentation/inventory_screen/inventory_screen.dart",
          "lib/presentation/inventory_screen/inventory_detail_screen.dart",
          "lib/presentation/inventory_screen/new_inventory_detail_screen.dart",
          "lib/services/inventory_service.dart",
          "lib/services/inventory_firestore_service.dart",
          "lib/database/inventory_database.dart"
        ]
      },
      {
        "name": "Customers",
        "description": "Customer list and details.",
        "files": [
          "lib/presentation/customers_screen/customers_screen.dart",
          "lib/presentation/customers_screen/customer_detail_screen.dart",
          "lib/presentation/customers_screen/widgets/*",
          "lib/services/customer_service.dart"
        ]
      },
      {
        "name": "Notifications",
        "description": "Local notifications and inventory alerts.",
        "files": [
          "lib/services/notification_service.dart",
          "lib/services/inventory_notification_service.dart",
          "lib/services/background_service.dart"
        ]
      },
      {
        "name": "Routing",
        "description": "Central app routing and initial screens.",
        "files": [
          "lib/routes/app_routes.dart",
          "lib/main.dart"
        ]
      },
      {
        "name": "Firebase Configuration",
        "description": "Firebase initialization and options per platform.",
        "files": [
          "lib/firebase_options.dart",
          "android/app/google-services.json",
          "ios/Runner/GoogleService-Info.plist (if present)"
        ]
      },
      {
        "name": "Shared Utilities and Theme",
        "description": "App-wide exports, theming, and animations.",
        "files": [
          "lib/core/app_export.dart",
          "lib/theme/app_theme.dart",
          "lib/animations/fluid_animations.dart",
          "lib/widgets/*"
        ]
      }
    ]
  }
}
